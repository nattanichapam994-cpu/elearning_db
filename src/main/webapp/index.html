<%@ page import="java.sql.*" %>
<%@ page contentType="text/html;charset=UTF-8" language="java" %>
<%

    request.setCharacterEncoding("UTF-8");

    String fullName = (String) session.getAttribute("userFullName");

    if (fullName == null) {

        response.sendRedirect("login.jsp");

        return;

    }
 
    // Config ‡∏ê‡∏≤‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•

    String url = "jdbc:mysql://localhost:3306/elearning_db?useUnicode=true&characterEncoding=UTF-8";

    String dbUser = "root";

    String dbPass = ""; 

%>
 
<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="UTF-8">
<title>‡∏Ñ‡∏•‡∏±‡∏á‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡∏π‡πâ - E-Learning</title>
<link href="https://fonts.googleapis.com/css2?family=Kanit:wght@300;400;500&display=swap" rel="stylesheet">
<style>

        body { font-family: 'Kanit', sans-serif; background-color: #f0f2f5; margin: 0; }

        .container { padding: 30px 50px; }
 
        /* --- Header & Navigation --- */

        .header-box { 

            background: white; padding: 25px; border-radius: 15px; 

            box-shadow: 0 4px 12px rgba(0,0,0,0.05); margin-bottom: 30px;

        }

        .user-welcome { font-size: 1.1rem; color: #65676b; margin-bottom: 20px; }

        .nav-buttons { display: flex; gap: 15px; flex-wrap: wrap; }

        .nav-btn {

            padding: 12px 25px; border-radius: 10px; text-decoration: none;

            font-weight: 500; display: flex; align-items: center; gap: 10px;

            transition: 0.3s; border: 1px solid #ddd; font-size: 1rem; color: #1c1e21;

        }

        .nav-btn:hover { background-color: #f2f2f2; transform: translateY(-2px); }

        /* ‡πÑ‡∏Æ‡πÑ‡∏•‡∏ó‡πå‡∏õ‡∏∏‡πà‡∏°‡∏´‡∏ô‡πâ‡∏≤‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô */

        .btn-study.active { 

            background-color: #1877f2; color: white; border-color: #1877f2; 

            box-shadow: 0 4px 8px rgba(24, 119, 242, 0.3);

        }
 
        /* --- Course Cards --- */

        .course-grid { 

            display: grid; grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)); 

            gap: 25px; 

        }

        .course-card { 

            background: white; border-radius: 15px; padding: 25px; 

            box-shadow: 0 4px 15px rgba(0,0,0,0.08); transition: 0.3s;

            text-align: center; border-top: 5px solid #1877f2;

            display: flex; flex-direction: column; justify-content: space-between;

        }

        .course-card:hover { transform: translateY(-8px); box-shadow: 0 8px 25px rgba(0,0,0,0.12); }

        .course-icon { font-size: 3rem; margin-bottom: 10px; }

        .course-title { font-size: 1.4rem; color: #1c1e21; margin: 10px 0; font-weight: 500; }

        .course-desc { color: #65676b; font-size: 0.95rem; margin-bottom: 20px; line-height: 1.5; }

        .btn-open {

            background-color: #1877f2; color: white; border: none;

            padding: 12px; width: 100%; border-radius: 8px;

            font-weight: bold; font-size: 1rem; cursor: pointer;

            transition: 0.2s; text-decoration: none; display: block;

        }

        .btn-open:hover { background-color: #166fe5; }
</style>
</head>
<body>
 
    <div class="container">
<div class="header-box">
<div class="user-welcome">‡∏™‡∏ß‡∏±‡∏™‡∏î‡∏µ‡∏Ñ‡∏∏‡∏ì <strong><%= fullName %></strong> | ‡∏¢‡∏¥‡∏ô‡∏î‡∏µ‡∏ï‡πâ‡∏≠‡∏ô‡∏£‡∏±‡∏ö‡∏™‡∏π‡πà‡πÅ‡∏´‡∏•‡πà‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏£‡∏π‡πâ‡∏≠‡∏≠‡∏ô‡πÑ‡∏•‡∏ô‡πå</div>
<div class="nav-buttons">
<a href="dashboard.jsp" class="nav-btn btn-study active">

                    üìñ 1. ‡∏Ñ‡∏•‡∏±‡∏á‡∏ö‡∏ó‡πÄ‡∏£‡∏µ‡∏¢‡∏ô
</a>
<a href="quizzes_member.jsp" class="nav-btn btn-quiz">

                    üìù 2. ‡∏ó‡∏≥‡πÅ‡∏ö‡∏ö‡∏ó‡∏î‡∏™‡∏≠‡∏ö
</a>
<a href="results.jsp" class="nav-btn btn-history">

                    üìä 3. ‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡πÄ‡∏£‡∏µ‡∏¢‡∏ô
</a>
</div>
</div>
 
        <h2 style="margin-bottom: 25px; color: #1c1e21; display: flex; align-items: center; gap: 10px;">
<span>üöÄ</span> ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏´‡∏±‡∏ß‡∏Ç‡πâ‡∏≠‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏®‡∏∂‡∏Å‡∏©‡∏≤
</h2>
 
        <div class="course-grid">
<%

                Connection conn = null;

                try {

                    Class.forName("com.mysql.cj.jdbc.Driver");

                    conn = DriverManager.getConnection(url, dbUser, dbPass);

                    // ‡∏î‡∏∂‡∏á‡∏£‡∏≤‡∏¢‡∏ä‡∏∑‡πà‡∏≠‡∏ß‡∏¥‡∏ä‡∏≤‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡∏à‡∏≤‡∏Å‡∏ê‡∏≤‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•

                    Statement stmt = conn.createStatement();

                    ResultSet rs = stmt.executeQuery("SELECT * FROM courses ORDER BY course_id ASC");
 
                    while (rs.next()) {

                        int cId = rs.getInt("course_id"); 

                        String cName = rs.getString("course_name");

                        // ‡∏Å‡∏≥‡∏´‡∏ô‡∏î Emoji ‡∏ï‡∏≤‡∏°‡∏ä‡∏∑‡πà‡∏≠‡∏ß‡∏¥‡∏ä‡∏≤‡πÄ‡∏ö‡∏∑‡πâ‡∏≠‡∏á‡∏ï‡πâ‡∏ô

                        String icon = "üìö";

                        if(cName.contains("C")) icon = "üíª";

                        if(cName.contains("‡πÄ‡∏ß‡πá‡∏ö")) icon = "üåê";

                        if(cName.contains("‡∏ê‡∏≤‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•")) icon = "üóÑÔ∏è";

            %>
<div class="course-card">
<div>
<div class="course-icon"><%= icon %></div>
<div style="color: #1877f2; font-size: 0.85rem; font-weight: bold;">‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà‡∏£‡∏´‡∏±‡∏™ #<%= cId %></div>
<h3 class="course-title"><%= cName %></h3>
<p class="course-desc">‡∏Ñ‡∏•‡∏¥‡∏Å‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏Ç‡πâ‡∏≤‡∏ä‡∏°‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏´‡∏≤‡∏Å‡∏≤‡∏£‡∏™‡∏≠‡∏ô ‡∏ß‡∏¥‡∏î‡∏µ‡πÇ‡∏≠ ‡πÅ‡∏•‡∏∞‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£‡∏õ‡∏£‡∏∞‡∏Å‡∏≠‡∏ö‡∏Å‡∏≤‡∏£‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏ß‡∏¥‡∏ä‡∏≤ <%= cName %></p>
</div>
<a href="lesson_view.jsp?course_id=<%= cId %>" class="btn-open">

                        üìñ ‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏ö‡∏ó‡πÄ‡∏£‡∏µ‡∏¢‡∏ô
</a>
</div>
<%

                    }

                } catch (Exception e) {

                    out.println("<div style='color:red; padding: 20px; background: white; border-radius: 10px;'>‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠: " + e.getMessage() + "</div>");

                } finally {

                    if (conn != null) conn.close();

                }

            %>
</div>
</div>
 
</body>
</html>
 